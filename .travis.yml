sudo: false
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: RmVLW6VZGnf5XhJ0lxWA8UrezVRS22aQTJ9dY7oIPIzD/UHdrg4+NxBJIHtwcpSLu/ska7OCUxV+fC8qe7BNfD31cslvVfm60yIxa4zbXvi9dhqITRrrFKplYsV2odXH2WE57eIZ6WMnQiI55bSUc1AuEpxDDN6FAF6tBFMym7i9VcyNQUXfsONwISBehNB6V60CwL/2kz+ho7A1HQQ4ZR0uGFyD976Sef6iVD1XiQL1BD5POnTYdjKYxlcRsPvVFLrfMIcgj6+ZvhEsCT0E6pjk+J0zzsJ82G+9WDD/426PttrEbtsWbIXRfswH5vzWz1+0elAELRaxZIvEriBRXahXu2RAW29H3MNCGa35HPLzKI3ppgJGkecXiaRd6cGjNZx4gMSjSe/ErLoVqVDou35BNuVW4pIBPgtWxdDSRXLSfIPol6vuUezZyZZah9BZKU+cS1DlMVSoVMIe6hkcfUjg72HYZJQTH4caB3fgJdPfWh5+6lsKhbjGPdcdSFAe2gZLocTVhzikfFTYW7S2cuAv94hrQhW9JWjXWpevApvs6K/L82NQI2gen7JvsDGbkbRayCETMGSK7iczyJWEW0aGydG1VCMHGWPRB9G0X0JKdHcRz55m8lLISovr2hNN2G/d27QBpG3e2It4lDCNC86sSNZI004GhZirspu3TLc=
  - secure: BxwdlL2Se4Ak6PlW/YwAzZ6N21nok8U06GiWV4burnH28xVNlbMVzbwUbR3Xzpi7n52aVwuXsXTGkUw7wwYd9PgwakjdpGmh+mjQRVen2P7NCvNRDG0O66aEyp8LUblncbTA6UTAFuK7ovtkz1WlI5J4C0tyZ2DazxBgTxMvU6PXjW5oEe1FBEBNe7bgHted3XYfPOVUEa+OlZ+06bFU6WSbmLJWH0shvHu78mLBRjzCK3q1sZfRq7MEGK1JGeFYqOkbSfsF+zwmG9bz0mMZIULRHb9q5gy9zrbU750lAcUNNzjXIEUvwrALjYwINQlTLCyJiPVZj3AvytTvg5enm8Wm6D6iIKQCf6IBp/mZAzPOjhZSlfZBoLTQhyGVECd8C3PasIYznkJ1o1KVPwc4HdM1EGtujeleyYDhjRDtKQN+q2/VmfTLcVe0KKEB6+iHyzlLAauszp27OYIMOWvYfM7FpfC66dLSKFHMUSg1nd6eq0PuFkoykeZ9semD76SjHm49+o+A2TrJg/wgliwMLyP1sCMyfGLWHhYbttdR0b5WQcn+425ej2WnD35ylJ3Oh2WU5JcVLiyqC6tMN/MZqQ3zD+AK2Z9g9jBCuAFG5Kot0rMEUY0K+VFG3ocBUooR19r4mZwmuDZHL9RhgC0/rjPN4ZIe0fdQjFfjrI1s/zg=
  - secure: CnAnVRWosusY3DbR/dUxbFkit2DcjZBcI1AEgv14Bo6HCuKYc9vPLm76F7ksBkzGPbfzEAjO5pAyATRyC2ATSQVQYG2LhB5kChGpKfK2apDfwGqKtLRoazIfQLvt/uROakA891M8WJUZLSq4YXN/Hsk3A5tpQV+Wm4jZOWgU7k3hIMalM+O3ZKqvJJtiscIhiqGFm1V+KlQM7DhBChwqozxXzHVVJJCvzFwArGTm/0DX58l8hw+LhriALJuArR0uOhtdicNzCZLg3otPPhOSNQSSCeqpCqGHSSjIBSA3D/+ZB0nUf21EOG+LtHTHfIfJ10ZfKpRKUBWYXr6Sa9O1nYR0q9BpALfi9jLPUCU4yCh0El4lWzCipkEEI0Edj5q98EtLIyOchne/3saizpjuDkl2npFCmCwYnXIXHbyhRXE8Q+IvY9BdPMNPlMNMwUU9smEq0VhOHPYR29p1+WgOScOSP8RtxckCrNKkyegVJGg9Ne9LnTNNAUQETo4we4OeaCX3wBfxJbTW/eSUerFyg/r+D0xZmMUdUZOCll0OS/zOFmQUeAUtDc9rdJzJx2HfDpQoqYOjDluywTar45U9vNQlADCyc9TL5f//X/lMbz18nPkxpiYG3NXXCZ3yuV3ok+vIi1jPZ2WZJub2Kv0FpwUcB5JVeq9n1wiUYBxEuK8=
  - secure: qF46LbDA+lVgIMWI++MJlQ8/ztC31qVXMY1TjSze8WTmn82SzJhiw7NutVQ8CPxWvdBDIoF/UmXTqW/esKbF/0HnFaQB9xMXXP6xm6B1vPldeGVcCgG4JQQQIubbpJI6jESOCc6dghCkQb/LsSnLdCArRf86f5L5vvfMrB+9jD7GgoNHr6BRLB0KFXbyeJRd8s+L0beycxQ702ABXBsFrnDF4xGkEQWqvoLUs3PCI2uPNp5JKphmw5tg3ej/ouwZygJuuKNuuKchOLvLSElQ/XdfctkgiWyRnRPNEBfifT5uyZuwIxZno/KJONzjfYAOocqsGOds2w71975sPPA31lPjB5WdGTD9UMsnoL/lGxmQo5XeVTG2VKS19LYl/MNNyTDRjDvJ9K4Fy5qDlLsnZV0SYrqqfM2bmVtR+JIFUQaNmOgpUYv/Co5uRdymZPGHw9N1vc4aIeKhtThtIW1vgxbPkpbS29AKo7kav1tlYo9F0mwshQ4ZJ8MEqdv3YzFSNEawEGqJhlsAAqb7GWtaeuWIJ3Q/snU/WZIB34x3V/SwlA2vhg1A1rfmBqJJZ+JP0WLL3N2tIBmdle5z/bHFrNaxPe4ukcRT8xZVPr46Cj2nnqKgLVdWuhMLyUo0PchPjR6uqqJJfI++3d9c+9DeHjajIzAnC1wleIT8bPUQvtc=
  - secure: JTAO0X6wz9M5yHg2YPK15+uwoHoMlLL690MNtPpoWyryoTp5m06e2GRz2GTSFO3TrFl7+tFelOdHUWrPb7PZb6/QvXh2OvCwpw3YHAiYvgEj2m9tS/1sl99r4JvlvbsjaFtud22LRchgbtZlQNfEAAGUpcatI71pgMjjCZjYCriT2wT709RHklKUSfX1zLOMn3iZs9Kw7/saVoQnVuczXFKDr10ZIqopPM5eVH25tyAZvtsS4w3lRWGoIm2GPME2nefndzX4tyB0TnMV/LCBFkXUUhS64xK6yeDJ7HWZG0VKed2ZJ+vlA4dGZODR93u0C/HDoWE7LUbRVv+rCPAHQUwFyEz6UpYdTnfAsZ9BlXbl9oJRpsxjOhKv9SWYHt2snmNlBn9JQ35B1mkxk7ThM+Oi8C2OlNh5wLVl8Pd6E8Xbrly92dgZB3LgdBd5QHUlCpzQtu0RUjHj3c3uc5Th0FI1Zc/TocWthzVDyvaSuiVGDiF49qq1oJXR405iBFrPG7fGoHobRcoGiXmkjh0Br3bYTyX8srhzuLlr5QKs5JXb/+/sNBcLbNf9dx7/n1BdRN3N9ufxHKhGtVwjIcOnUdkTKFsHdswG14rDwYsxP0ZYX7pBSrJPPV6E2e5ei7WFAJzsqZ0UGRzOHVftOOgl1jyHwPrN+P9WFJQZhdbDf7M=
  - secure: N0QruSCJpG7/I0UqD9xNnLrc0vhocEog8IXRrxEHS64YooM0JE556TwcW1lBUKE2tDgZtrhPzKAFOm37gZygZgoy/BsQErTTDmUIm+vuCywJpJkJHgbd0fQ3d8MBGTziaZlVa57qT2UC0UraOwScCeC/iFOtpF8ZMewHEXPF3G7YFtDVVAmC8CAr4NahYBOte9o89uOhdA7BN6ZSEPZe/kedfD8HLdHHgybXq4Fn+9r+04OomPcOEx7bSjIyVKMnHf7hfl7cK/WTZlmUTT3ce2/mUbZZG912il3gmBFMcZfeCyiT9d1CSem6uL8cP+LBGVXrbid0SuqLR22n6YA/dYkPYYagVRZOvq3a8aUBXVyNugynV7XBRkDgA/EzI3NR7qWuN1yra431gFdMs5zulNPC6ntCUJ40vjo3FF+spFmv9mCFj58qGNyRYEVr1tNlJvR6PmmANe+YwxUGBUB2mpefyodA9sJO1TsUHCoyCJCcfxRDZ/3+ZYLXYipwxMpiT/vb59c8fj5dmqb4dXJ2EFN3JkUeM38U+uZBH8WduWA1vX8ap9uCnp0yf6XBuKxuB0m8WMYdTZfICNE0QF/zWH9kexOw39xrL5PlkIj+0JJZNZbO+JZgJPT4aXJ+L3DEvSaJGzd9y1k+LWgrV4JHNeuVn+8L29IKSg63f95ol1w=
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
