sudo: false
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
env:
  global:
  - secure: RmVLW6VZGnf5XhJ0lxWA8UrezVRS22aQTJ9dY7oIPIzD/UHdrg4+NxBJIHtwcpSLu/ska7OCUxV+fC8qe7BNfD31cslvVfm60yIxa4zbXvi9dhqITRrrFKplYsV2odXH2WE57eIZ6WMnQiI55bSUc1AuEpxDDN6FAF6tBFMym7i9VcyNQUXfsONwISBehNB6V60CwL/2kz+ho7A1HQQ4ZR0uGFyD976Sef6iVD1XiQL1BD5POnTYdjKYxlcRsPvVFLrfMIcgj6+ZvhEsCT0E6pjk+J0zzsJ82G+9WDD/426PttrEbtsWbIXRfswH5vzWz1+0elAELRaxZIvEriBRXahXu2RAW29H3MNCGa35HPLzKI3ppgJGkecXiaRd6cGjNZx4gMSjSe/ErLoVqVDou35BNuVW4pIBPgtWxdDSRXLSfIPol6vuUezZyZZah9BZKU+cS1DlMVSoVMIe6hkcfUjg72HYZJQTH4caB3fgJdPfWh5+6lsKhbjGPdcdSFAe2gZLocTVhzikfFTYW7S2cuAv94hrQhW9JWjXWpevApvs6K/L82NQI2gen7JvsDGbkbRayCETMGSK7iczyJWEW0aGydG1VCMHGWPRB9G0X0JKdHcRz55m8lLISovr2hNN2G/d27QBpG3e2It4lDCNC86sSNZI004GhZirspu3TLc=
  - secure: BxwdlL2Se4Ak6PlW/YwAzZ6N21nok8U06GiWV4burnH28xVNlbMVzbwUbR3Xzpi7n52aVwuXsXTGkUw7wwYd9PgwakjdpGmh+mjQRVen2P7NCvNRDG0O66aEyp8LUblncbTA6UTAFuK7ovtkz1WlI5J4C0tyZ2DazxBgTxMvU6PXjW5oEe1FBEBNe7bgHted3XYfPOVUEa+OlZ+06bFU6WSbmLJWH0shvHu78mLBRjzCK3q1sZfRq7MEGK1JGeFYqOkbSfsF+zwmG9bz0mMZIULRHb9q5gy9zrbU750lAcUNNzjXIEUvwrALjYwINQlTLCyJiPVZj3AvytTvg5enm8Wm6D6iIKQCf6IBp/mZAzPOjhZSlfZBoLTQhyGVECd8C3PasIYznkJ1o1KVPwc4HdM1EGtujeleyYDhjRDtKQN+q2/VmfTLcVe0KKEB6+iHyzlLAauszp27OYIMOWvYfM7FpfC66dLSKFHMUSg1nd6eq0PuFkoykeZ9semD76SjHm49+o+A2TrJg/wgliwMLyP1sCMyfGLWHhYbttdR0b5WQcn+425ej2WnD35ylJ3Oh2WU5JcVLiyqC6tMN/MZqQ3zD+AK2Z9g9jBCuAFG5Kot0rMEUY0K+VFG3ocBUooR19r4mZwmuDZHL9RhgC0/rjPN4ZIe0fdQjFfjrI1s/zg=
  - secure: CnAnVRWosusY3DbR/dUxbFkit2DcjZBcI1AEgv14Bo6HCuKYc9vPLm76F7ksBkzGPbfzEAjO5pAyATRyC2ATSQVQYG2LhB5kChGpKfK2apDfwGqKtLRoazIfQLvt/uROakA891M8WJUZLSq4YXN/Hsk3A5tpQV+Wm4jZOWgU7k3hIMalM+O3ZKqvJJtiscIhiqGFm1V+KlQM7DhBChwqozxXzHVVJJCvzFwArGTm/0DX58l8hw+LhriALJuArR0uOhtdicNzCZLg3otPPhOSNQSSCeqpCqGHSSjIBSA3D/+ZB0nUf21EOG+LtHTHfIfJ10ZfKpRKUBWYXr6Sa9O1nYR0q9BpALfi9jLPUCU4yCh0El4lWzCipkEEI0Edj5q98EtLIyOchne/3saizpjuDkl2npFCmCwYnXIXHbyhRXE8Q+IvY9BdPMNPlMNMwUU9smEq0VhOHPYR29p1+WgOScOSP8RtxckCrNKkyegVJGg9Ne9LnTNNAUQETo4we4OeaCX3wBfxJbTW/eSUerFyg/r+D0xZmMUdUZOCll0OS/zOFmQUeAUtDc9rdJzJx2HfDpQoqYOjDluywTar45U9vNQlADCyc9TL5f//X/lMbz18nPkxpiYG3NXXCZ3yuV3ok+vIi1jPZ2WZJub2Kv0FpwUcB5JVeq9n1wiUYBxEuK8=
  - secure: qF46LbDA+lVgIMWI++MJlQ8/ztC31qVXMY1TjSze8WTmn82SzJhiw7NutVQ8CPxWvdBDIoF/UmXTqW/esKbF/0HnFaQB9xMXXP6xm6B1vPldeGVcCgG4JQQQIubbpJI6jESOCc6dghCkQb/LsSnLdCArRf86f5L5vvfMrB+9jD7GgoNHr6BRLB0KFXbyeJRd8s+L0beycxQ702ABXBsFrnDF4xGkEQWqvoLUs3PCI2uPNp5JKphmw5tg3ej/ouwZygJuuKNuuKchOLvLSElQ/XdfctkgiWyRnRPNEBfifT5uyZuwIxZno/KJONzjfYAOocqsGOds2w71975sPPA31lPjB5WdGTD9UMsnoL/lGxmQo5XeVTG2VKS19LYl/MNNyTDRjDvJ9K4Fy5qDlLsnZV0SYrqqfM2bmVtR+JIFUQaNmOgpUYv/Co5uRdymZPGHw9N1vc4aIeKhtThtIW1vgxbPkpbS29AKo7kav1tlYo9F0mwshQ4ZJ8MEqdv3YzFSNEawEGqJhlsAAqb7GWtaeuWIJ3Q/snU/WZIB34x3V/SwlA2vhg1A1rfmBqJJZ+JP0WLL3N2tIBmdle5z/bHFrNaxPe4ukcRT8xZVPr46Cj2nnqKgLVdWuhMLyUo0PchPjR6uqqJJfI++3d9c+9DeHjajIzAnC1wleIT8bPUQvtc=
  - secure: I3mIN/XK6slSximSrbaGvjx/uroi8gr4lfkc+GgcMCux+BOfkWWF6b1DFeRfocnKxuEcyjvwXA3NlVYPlLqbKXs4ajPYLVkO21qUZCc75AoUMHC575hxeHnGbWBoVBS0eYFzzxsjRFYEW+utk/sEtGMBtInloBYeOhfjKkx8siLOYClPmfHTry0QGZBpfES7npC+Iqoeebc9QIKPd8Q1pURMEC6bHnqGyY1d7BsauuXJ7y5CU/RgG/HODV+7c/PtkIKpa1WgUTdm+8sQfLoefSDdVgFnccpXcMe4555htEw3GkQzvDrEZjRtG/77t1TdbH59YC24GElrJB7kdyq1ENKnXtOSN8ARuozri/TclDXkMUq9wbqv6uQlrjTAy1o6ySKhzG67fjbfD8Gx9H9PuXUknGPYJ5sI/F7suEbzF8C6pi9MK2DFXZ+VLIP11ItUMO4fVOzkisZsp1RkY8sH7Y4QLrB65Hv5EPjk1v4UTjegdupbpi2UpUPGvDVsj1u79LG+oFUllhUdFkruG8qk/xLrjbV5Q63m2hOV7VWmsueiJrkRs9q+Y+vMAAERF5JV9tHL6SVwbRPwx6FzGSCu+sT6BiD2RQ5aLOvzIuJeUt0sE6vMF83i99dtqjigPcaeeGfTZMweRqyW2mz+0w0tVBgdfoA+G46lwCJszti1Y+A=
  - secure: OdZ2YVAAFC8A13Mfl003hMteZxoVAB0DmOHlVBCpnx8vcpOGomhW+CexheHaBJ72EZWiV5ajFnVnUkTDvktEU1vzKckbvxx9MJy9JK98+LX9wJxOhR3KbGjPRNFfaPtpkspUcy9t83pQP7Jpy+8ngwdrJoDzru5rhu84Z6nhGokXg5HYqSlMJNYxSVXl1XnSXM9jv7xQiK7LRyQwgeHrV/l5ryUxV7V8oItY4Ck9Wc7wCHNYqu45jqiO31iFr6xYXGqBOlU6XVgpXTuk66vNDumorP3dkxU2CIOrd/0pE1FSE0mTJfYhbkXPefV+LbQmf7NSWSt3DYWVttDRFElPtbZEgoKfl/yzlAvFTXk20dpJZr+qjtf06h7a+iLbL0PgdOhGf0cJDlpc53jlZwBOWUT5TishrPyFjyWibjZrKd5xNOcZdaDKOxuDfaDFpS6pin89AzaFLcOsZW/ywe1uO37OX5WZm03zygu5IrJ7Pf23hiNHVqJBgFA3kuknFREpLDd4I+q1Hwbq5d1EUG+NJvh6IrAZVWwqnPdnAdha48vwP+N+hX0hVMhPmcKObA1Zqa/o6g8f8/+ibICSBq8242G5hcpuCNrAz7J6qbiBAOZJaKF6B9sExaO5O/yRETKGimzOmVlg1hrEamIk1br7zVwYA5qBLqTDr1m579FLWVM=
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"